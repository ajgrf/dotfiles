alias ls='LC_COLLATE=C ls -A -1'
alias lc='LC_COLLATE=C command ls -A'
alias l='lc -p'
alias la='ls'
alias ll='ls -la'
alias lh='ll -h'

if ! type doas >/dev/null 2>&1; then
	alias doas='sudo -p "doas (%u@%h) password: "'
fi

alias ag='ag --nocolor --nogroup'
alias doch='eval doas $(fc -ln -1)'
alias emacs='emacs -nw'
alias feh='feh -FZD-10'
alias feh1='feh --cycle-once'
alias nb='newsbeuter -q'
alias open='xdg-open'
alias reset='reset -Q'
alias rg='rg --color never --no-heading'
alias stack='stack --color never'

mkcd() { mkdir -p "$@" && cd "$1"; }

# set variable identifying the chroot you work in (used in the prompt below)
if [ -z "${debian_chroot:-}" ] && [ -r /etc/debian_chroot ]; then
	debian_chroot=$(cat /etc/debian_chroot)
fi

# pretty print working directory
ppwd() {
	local dir="${PWD}/" n="${1:-255}"

	case "$dir" in
	"${HOME}/"*)
		dir="~/${dir#$HOME/}"
		;;
	esac
	dir="${dir%/}"

	if test "${#dir}" -gt "$n"; then
		n=$(( n - 3 ))
		while test "${#dir}" -gt "$n"; do
			dir="${dir#?}"
		done
		dir="...${dir}"
	fi

	echo "$dir"
}

prompt() {
	local e=$?  title="" S='$'
	test "$e" -eq 0 && e=""
	#test "$USER_ID" -eq 0 && S='#'

	echo -n "${e:+$e|}${debian_chroot:+($debian_chroot)}${USER}@${HOSTNAME%%.*}:$(ppwd 28)$S "
}
PS1='$(prompt)'

#case "$TERM" in
#xterm*|rxvt*|st*|screen*|tmux*|dvtm*)
#	title="${USER}@${HOSTNAME%%.*}: ${dir}"
#	title=$'\001\r\001\e]0;'"$title"$'\a\001'
#	;;
#esac

case "$KSH_VERSION" in
*LEGACY\ KSH*|*MIRBSD\ KSH*)
	. "$HOME/.mkshrc"
	;;
esac
