# -*- mode: sh -*-

pass_get() {
	if test "$2"; then
		pass "$1" | sed -n "/^$2: /s///p"
	else
		pass "$1" | sed 1q
	fi
}

use_guix() {
	local cache_dir

	cache_dir="$(direnv_layout_dir)/guix-profile"
	if test -e "$cache_dir/etc/profile"; then
		. "$cache_dir/etc/profile"
	else
		mkdir "$(direnv_layout_dir)"
		eval "$(guix environment --root="$cache_dir" "$@" --search-paths)"
	fi
}
